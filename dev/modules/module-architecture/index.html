<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=ansible,wiki,ops,devops,auto,运维自动化><link href=https://ansible.leops.cn/dev/modules/module-architecture/ rel=canonical><meta name=author content=lework><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.5"><title>module 架构 - Ansible wiki</title><link rel=stylesheet href=../../../assets/stylesheets/main.21aed14c.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.196e0c26.min.css><meta name=theme-color content=#4051b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://ansible.leops.cn title="Ansible wiki" class="md-header-nav__button md-logo" aria-label="Ansible wiki"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Ansible wiki </span> <span class="md-header-nav__topic md-ellipsis"> module 架构 </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/leops-china/ansible-wiki/ title="前往 GitHub 仓库" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> leops-china/ansible-wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../basic/Introduction/ class=md-tabs__link> Ansible 入门 </a> </li> <li class=md-tabs__item> <a href=../../../advanced/optimization/ class=md-tabs__link> Ansible 进阶 </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Ansible 开发 </a> </li> <li class=md-tabs__item> <a href=../../../ui/ class=md-tabs__link> Ansible UI </a> </li> <li class=md-tabs__item> <a href=../../../certification/ class=md-tabs__link> Ansible 认证 </a> </li> <li class=md-tabs__item> <a href=../../../roles/ class=md-tabs__link> Ansible Roles </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://ansible.leops.cn title="Ansible wiki" class="md-nav__button md-logo" aria-label="Ansible wiki"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ansible wiki </label> <div class=md-nav__source> <a href=https://github.com/leops-china/ansible-wiki/ title="前往 GitHub 仓库" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> leops-china/ansible-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../resources/ class=md-nav__link> Ansible 资源 </a> </li> <li class=md-nav__item> <a href=../../../appreciate/ class=md-nav__link> 赞赏支持 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Ansible 入门 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 入门" data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Ansible 入门 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../basic/Introduction/ class=md-nav__link> 1. Ansible 介绍 </a> </li> <li class=md-nav__item> <a href=../../../basic/Installation/ class=md-nav__link> 2. 安装 Ansible </a> </li> <li class=md-nav__item> <a href=../../../basic/Quickstart/ class=md-nav__link> 3. 快速开始 </a> </li> <li class=md-nav__item> <a href=../../../basic/Inventory/ class=md-nav__link> 4. 认识主机清单 </a> </li> <li class=md-nav__item> <a href=../../../basic/Patterns/ class=md-nav__link> 5. Patterns 匹配 </a> </li> <li class=md-nav__item> <a href=../../../basic/Ad-hoc/ class=md-nav__link> 6. 使用 ad-hoc 命令 </a> </li> <li class=md-nav__item> <a href=../../../basic/Ansible-command/ class=md-nav__link> 7. 熟悉 ansible 命令 </a> </li> <li class=md-nav__item> <a href=../../../basic/Playbook/ class=md-nav__link> 8. 使用 Playbook </a> </li> <li class=md-nav__item> <a href=../../../basic/Include-roles/ class=md-nav__link> 9. 包含和角色 </a> </li> <li class=md-nav__item> <a href=../../../basic/Variables/ class=md-nav__link> 10. 使用变量 </a> </li> <li class=md-nav__item> <a href=../../../basic/Facts/ class=md-nav__link> 11. Facts 数据 </a> </li> <li class=md-nav__item> <a href=../../../basic/Jinja2/ class=md-nav__link> 12. Jinja2 模板语法 </a> </li> <li class=md-nav__item> <a href=../../../basic/Conditionals-loop/ class=md-nav__link> 13. 条件判断与循环 </a> </li> <li class=md-nav__item> <a href=../../../basic/Blocks/ class=md-nav__link> 14. Blocks </a> </li> <li class=md-nav__item> <a href=../../../basic/Playbook-features/ class=md-nav__link> 15. Playbook 高级特性 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-16 type=checkbox id=nav-4-16> <label class=md-nav__link for=nav-4-16> 扩展阅读(深入必读) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=扩展阅读(深入必读) data-md-level=2> <label class=md-nav__title for=nav-4-16> <span class="md-nav__icon md-icon"></span> 扩展阅读(深入必读) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../basic/Reference/Yaml/ class=md-nav__link> 1. YAML 语法 </a> </li> <li class=md-nav__item> <a href=../../../basic/Reference/Vaults/ class=md-nav__link> 2. Vaults 加密数据 </a> </li> <li class=md-nav__item> <a href=../../../basic/Reference/Keywords/ class=md-nav__link> 3. 关键字使用 </a> </li> <li class=md-nav__item> <a href=../../../basic/Reference/Module/ class=md-nav__link> 4. 模块索引 </a> </li> <li class=md-nav__item> <a href=../../../basic/Reference/Config/ class=md-nav__link> 5. Ansible 配置 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-17 type=checkbox id=nav-4-17> <label class=md-nav__link for=nav-4-17> Windows <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Windows data-md-level=2> <label class=md-nav__title for=nav-4-17> <span class="md-nav__icon md-icon"></span> Windows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../basic/Windows/manager-windows/ class=md-nav__link> 1. 管理 Windows 主机 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Ansible 进阶 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 进阶" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> Ansible 进阶 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/optimization/ class=md-nav__link> Ansible 优化 </a> </li> <li class=md-nav__item> <a href=../../../advanced/ansible-config/ class=md-nav__link> Ansible 的常用设置 </a> </li> <li class=md-nav__item> <a href=../../../advanced/best-practices/ class=md-nav__link> Ansible 最佳实践 </a> </li> <li class=md-nav__item> <a href=../../../advanced/ansible-lint/ class=md-nav__link> 使用 Ansible-lint </a> </li> <li class=md-nav__item> <a href=../../../advanced/dynamic-hosts/ class=md-nav__link> 使用动态主机 </a> </li> <li class=md-nav__item> <a href=../../../advanced/dynamic-inventory/ class=md-nav__link> 使用动态主机管理云服务 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-7 type=checkbox id=nav-5-7> <label class=md-nav__link for=nav-5-7> Ansible 安全 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 安全" data-md-level=2> <label class=md-nav__title for=nav-5-7> <span class="md-nav__icon md-icon"></span> Ansible 安全 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/security/ class=md-nav__link> Ansible 控制节点安全 </a> </li> <li class=md-nav__item> <a href=../../../advanced/security/firewall/ class=md-nav__link> - 节点安全: 防火墙设置 </a> </li> <li class=md-nav__item> <a href=../../../advanced/security/ssh-2step/ class=md-nav__link> - 节点安全: ssh登录二次验证 </a> </li> <li class=md-nav__item> <a href=../../../advanced/security/audit/ class=md-nav__link> - 节点安全: 命令审计 </a> </li> <li class=md-nav__item> <a href=../../../advanced/security/vault-hosts/ class=md-nav__link> - 节点安全: 加密主机清单 </a> </li> <li class=md-nav__item> <a href=../../../advanced/security/filter-command/ class=md-nav__link> 过滤 Ansible 危险指令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-8 type=checkbox id=nav-5-8> <label class=md-nav__link for=nav-5-8> Ansible 实践 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 实践" data-md-level=2> <label class=md-nav__title for=nav-5-8> <span class="md-nav__icon md-icon"></span> Ansible 实践 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/practice/snippets/ class=md-nav__link> Ansible Task片段 </a> </li> <li class=md-nav__item> <a href=../../../advanced/practice/jenkins-and-ansible/ class=md-nav__link> 在 Jenkins 中使用 Ansible </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../advanced/ara/ class=md-nav__link> 使用 ARA 记录 Ansible 执行结果 </a> </li> <li class=md-nav__item> <a href=../../../advanced/ansible-cmdb/ class=md-nav__link> 使用 Ansible-cmdb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6 checked> <label class=md-nav__link for=nav-6> Ansible 开发 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 开发" data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> Ansible 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Ansible 开发说明 </a> </li> <li class=md-nav__item> <a href=../../ansible-architecture/ class=md-nav__link> Ansible 架构 </a> </li> <li class=md-nav__item> <a href=../../pycharm-remote-development/ class=md-nav__link> 使用 PyCharm 远程开发 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Ansible 调试 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 调试" data-md-level=2> <label class=md-nav__title for=nav-6-4> <span class="md-nav__icon md-icon"></span> Ansible 调试 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../debug/verbose-debug/ class=md-nav__link> 详细输出 </a> </li> <li class=md-nav__item> <a href=../../debug/pdb/ class=md-nav__link> pdb 本地调试 </a> </li> <li class=md-nav__item> <a href=../../debug/pycharm/ class=md-nav__link> PyCharm 远程调试 </a> </li> <li class=md-nav__item> <a href=../../debug/module-debug/ class=md-nav__link> 模块调试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-5 type=checkbox id=nav-6-5 checked> <label class=md-nav__link for=nav-6-5> Module 开发 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Module 开发" data-md-level=2> <label class=md-nav__title for=nav-6-5> <span class="md-nav__icon md-icon"></span> Module 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Module 开发说明 </a> </li> <li class=md-nav__item> <a href=../remote_copy/ class=md-nav__link> 创建一个简单的module </a> </li> <li class=md-nav__item> <a href=../huawei-switch/ class=md-nav__link> module 示例: 连接华为交换机 </a> </li> <li class=md-nav__item> <a href=../module-outher-dev/ class=md-nav__link> module 示例: 其他语言开发 </a> </li> <li class=md-nav__item> <a href=../module-shell-dir/ class=md-nav__link> module 示例: dir </a> </li> <li class=md-nav__item> <a href=../module-docker-facts/ class=md-nav__link> module 示例: docker_facts </a> </li> <li class=md-nav__item> <a href=../module-wechat/ class=md-nav__link> module 示例: wechat </a> </li> <li class=md-nav__item> <a href=../module-return/ class=md-nav__link> module 的返回值 </a> </li> <li class=md-nav__item> <a href=../module-doc/ class=md-nav__link> module 的帮助文档 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> module 架构 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> module 架构 </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 模块类型 </a> <nav class=md-nav aria-label=模块类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aaction-plugins class=md-nav__link> Aaction plugins </a> </li> <li class=md-nav__item> <a href=#new-style-modules class=md-nav__link> New-style modules </a> <nav class=md-nav aria-label="New-style modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=#powershell class=md-nav__link> PowerShell </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jsonargs-modules class=md-nav__link> JSONARGS modules </a> </li> <li class=md-nav__item> <a href=#non-native-want-json-modules class=md-nav__link> Non-native want JSON modules </a> </li> <li class=md-nav__item> <a href=#binary-modules class=md-nav__link> Binary modules </a> </li> <li class=md-nav__item> <a href=#old-style-modules class=md-nav__link> Old-style modules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 模块是如何执行的 </a> <nav class=md-nav aria-label=模块是如何执行的> <ul class=md-nav__list> <li class=md-nav__item> <a href=#executortask_executor class=md-nav__link> Executor/task_executor </a> </li> <li class=md-nav__item> <a href=#normal-action-plugin class=md-nav__link> normal action plugin </a> </li> <li class=md-nav__item> <a href=#executormodule_commonpy class=md-nav__link> Executor/module_common.py </a> </li> <li class=md-nav__item> <a href=#assembler-frameworks class=md-nav__link> Assembler frameworks </a> <nav class=md-nav aria-label="Assembler frameworks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-replacer-framework class=md-nav__link> Module Replacer framework </a> </li> <li class=md-nav__item> <a href=#ansiballz-framework class=md-nav__link> Ansiballz framework </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 参数传递 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 内部参数 </a> <nav class=md-nav aria-label=内部参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_ansible_no_log class=md-nav__link> _ansible_no_log </a> </li> <li class=md-nav__item> <a href=#_ansible_debug class=md-nav__link> _ansible_debug </a> </li> <li class=md-nav__item> <a href=#_ansible_diff class=md-nav__link> _ansible_diff </a> </li> <li class=md-nav__item> <a href=#_ansible_verbosity class=md-nav__link> _ansible_verbosity </a> </li> <li class=md-nav__item> <a href=#_ansible_selinux_special_fs class=md-nav__link> _ansible_selinux_special_fs </a> </li> <li class=md-nav__item> <a href=#_ansible_syslog_facility class=md-nav__link> _ansible_syslog_facility </a> </li> <li class=md-nav__item> <a href=#_ansible_version class=md-nav__link> _ansible_version </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 模块返回值和不安全字符串 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 特殊事项 </a> <nav class=md-nav aria-label=特殊事项> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pipelining class=md-nav__link> Pipelining </a> </li> <li class=md-nav__item> <a href=#stdin class=md-nav__link> 为什么在stdin传递参数? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ansiblemodule class=md-nav__link> AnsibleModule </a> <nav class=md-nav aria-label=AnsibleModule> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 参数 </a> <nav class=md-nav aria-label=参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type class=md-nav__link> type </a> </li> <li class=md-nav__item> <a href=#elements class=md-nav__link> elements </a> </li> <li class=md-nav__item> <a href=#default class=md-nav__link> default </a> </li> <li class=md-nav__item> <a href=#fallback class=md-nav__link> fallback </a> </li> <li class=md-nav__item> <a href=#choices class=md-nav__link> choices </a> </li> <li class=md-nav__item> <a href=#required class=md-nav__link> required </a> </li> <li class=md-nav__item> <a href=#no_log class=md-nav__link> no_log </a> </li> <li class=md-nav__item> <a href=#aliases class=md-nav__link> aliases </a> </li> <li class=md-nav__item> <a href=#options class=md-nav__link> options </a> </li> <li class=md-nav__item> <a href=#apply_defaults class=md-nav__link> apply_defaults </a> </li> <li class=md-nav__item> <a href=#removed_in_version class=md-nav__link> removed_in_version </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../module-utilities/ class=md-nav__link> module 工具类 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-6 type=checkbox id=nav-6-6> <label class=md-nav__link for=nav-6-6> Plugin 开发 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Plugin 开发" data-md-level=2> <label class=md-nav__title for=nav-6-6> <span class="md-nav__icon md-icon"></span> Plugin 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../plugins/ class=md-nav__link> Plugin 开发说明 </a> </li> <li class=md-nav__item> <a href=../../plugins/Action-hello/ class=md-nav__link> Action 示例: hello </a> </li> <li class=md-nav__item> <a href=../../plugins/Callback-BlackHole/ class=md-nav__link> Callback 示例: BlackHole </a> </li> <li class=md-nav__item> <a href=../../plugins/Filter-split/ class=md-nav__link> Filter 示例: split </a> </li> <li class=md-nav__item> <a href=../../plugins/Inventory-csv/ class=md-nav__link> Inventory 示例: csv </a> </li> <li class=md-nav__item> <a href=../../plugins/Lookup-github-status/ class=md-nav__link> Lookup 示例: github_status </a> </li> <li class=md-nav__item> <a href=../../plugins/Vars-csv-vars/ class=md-nav__link> Vars 示例: csv_vars </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-7 type=checkbox id=nav-6-7> <label class=md-nav__link for=nav-6-7> API 使用 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API 使用" data-md-level=2> <label class=md-nav__title for=nav-6-7> <span class="md-nav__icon md-icon"></span> API 使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/ class=md-nav__link> API 使用说明 </a> </li> <li class=md-nav__item> <a href=../../api/api-task/ class=md-nav__link> 使用 API 运行任务 </a> </li> <li class=md-nav__item> <a href=../../api/api-playbook/ class=md-nav__link> 使用 API 运行 Palybook </a> </li> <li class=md-nav__item> <a href=../../api/api-suitable/ class=md-nav__link> 使用 suitable </a> </li> <li class=md-nav__item> <a href=../../api/api-ansible-runner/ class=md-nav__link> 使用 ansible runner </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Ansible UI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible UI" data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"></span> Ansible UI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ui/ class=md-nav__link> Ansible UI 说明 </a> </li> <li class=md-nav__item> <a href=../../../ui/awx/ class=md-nav__link> Ansible Awx </a> </li> <li class=md-nav__item> <a href=../../../ui/tower/ class=md-nav__link> Ansible Tower </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Ansible 认证 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 认证" data-md-level=1> <label class=md-nav__title for=nav-8> <span class="md-nav__icon md-icon"></span> Ansible 认证 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../certification/ class=md-nav__link> Ansible 认证说明 </a> </li> <li class=md-nav__item> <a href=../../../certification/ex407-example/ class=md-nav__link> EX407 示例试题 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> Ansible Roles <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible Roles" data-md-level=1> <label class=md-nav__title for=nav-9> <span class="md-nav__icon md-icon"></span> Ansible Roles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/ class=md-nav__link> Ansible roles 怎么用？ </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-2 type=checkbox id=nav-9-2> <label class=md-nav__link for=nav-9-2> 认证 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=认证 data-md-level=2> <label class=md-nav__title for=nav-9-2> <span class="md-nav__icon md-icon"></span> 认证 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/auth/kerberos-client/ class=md-nav__link> kerberos-client </a> </li> <li class=md-nav__item> <a href=../../../roles/auth/kerberos-server/ class=md-nav__link> kerberos-server </a> </li> <li class=md-nav__item> <a href=../../../roles/auth/openldap/ class=md-nav__link> openldap </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-3 type=checkbox id=nav-9-3> <label class=md-nav__link for=nav-9-3> 系统环境 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=系统环境 data-md-level=2> <label class=md-nav__title for=nav-9-3> <span class="md-nav__icon md-icon"></span> 系统环境 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/env/ant/ class=md-nav__link> ant </a> </li> <li class=md-nav__item> <a href=../../../roles/env/erlang/ class=md-nav__link> erlang </a> </li> <li class=md-nav__item> <a href=../../../roles/env/go/ class=md-nav__link> go </a> </li> <li class=md-nav__item> <a href=../../../roles/env/hostnames/ class=md-nav__link> hostnames </a> </li> <li class=md-nav__item> <a href=../../../roles/env/java/ class=md-nav__link> java </a> </li> <li class=md-nav__item> <a href=../../../roles/env/lua/ class=md-nav__link> lua </a> </li> <li class=md-nav__item> <a href=../../../roles/env/mvn/ class=md-nav__link> mvn </a> </li> <li class=md-nav__item> <a href=../../../roles/env/nodejs/ class=md-nav__link> nodejs </a> </li> <li class=md-nav__item> <a href=../../../roles/env/openssh/ class=md-nav__link> openssh </a> </li> <li class=md-nav__item> <a href=../../../roles/env/openssl/ class=md-nav__link> openssl </a> </li> <li class=md-nav__item> <a href=../../../roles/env/os-init/ class=md-nav__link> os-init </a> </li> <li class=md-nav__item> <a href=../../../roles/env/php/ class=md-nav__link> php </a> </li> <li class=md-nav__item> <a href=../../../roles/env/python2.7/ class=md-nav__link> python2.7 </a> </li> <li class=md-nav__item> <a href=../../../roles/env/repo-epel/ class=md-nav__link> repo-epel </a> </li> <li class=md-nav__item> <a href=../../../roles/env/ruby/ class=md-nav__link> ruby </a> </li> <li class=md-nav__item> <a href=../../../roles/env/sbt/ class=md-nav__link> sbt </a> </li> <li class=md-nav__item> <a href=../../../roles/env/ssh-2fa/ class=md-nav__link> ssh-2fa </a> </li> <li class=md-nav__item> <a href=../../../roles/env/ssh-keys/ class=md-nav__link> ssh-keys </a> </li> <li class=md-nav__item> <a href=../../../roles/env/update-kernel/ class=md-nav__link> update-kernel </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-4 type=checkbox id=nav-9-4> <label class=md-nav__link for=nav-9-4> WEB <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=WEB data-md-level=2> <label class=md-nav__title for=nav-9-4> <span class="md-nav__icon md-icon"></span> WEB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/web/nginx/ class=md-nav__link> nginx </a> </li> <li class=md-nav__item> <a href=../../../roles/web/openresty/ class=md-nav__link> openresty </a> </li> <li class=md-nav__item> <a href=../../../roles/web/tengine/ class=md-nav__link> tengine </a> </li> <li class=md-nav__item> <a href=../../../roles/web/tomcat/ class=md-nav__link> tomcat </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-5 type=checkbox id=nav-9-5> <label class=md-nav__link for=nav-9-5> 数据库 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=数据库 data-md-level=2> <label class=md-nav__title for=nav-9-5> <span class="md-nav__icon md-icon"></span> 数据库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/database/memcached/ class=md-nav__link> memcached </a> </li> <li class=md-nav__item> <a href=../../../roles/database/mongodb/ class=md-nav__link> mongodb </a> </li> <li class=md-nav__item> <a href=../../../roles/database/mycat/ class=md-nav__link> mycat </a> </li> <li class=md-nav__item> <a href=../../../roles/database/mysql/ class=md-nav__link> mysql </a> </li> <li class=md-nav__item> <a href=../../../roles/database/mysql57/ class=md-nav__link> mysql57 </a> </li> <li class=md-nav__item> <a href=../../../roles/database/redis/ class=md-nav__link> redis </a> </li> <li class=md-nav__item> <a href=../../../roles/database/redis5/ class=md-nav__link> redis5 </a> </li> <li class=md-nav__item> <a href=../../../roles/database/codis/ class=md-nav__link> codis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-6 type=checkbox id=nav-9-6> <label class=md-nav__link for=nav-9-6> 键值存储 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=键值存储 data-md-level=2> <label class=md-nav__title for=nav-9-6> <span class="md-nav__icon md-icon"></span> 键值存储 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/kv/consul/ class=md-nav__link> consul </a> </li> <li class=md-nav__item> <a href=../../../roles/kv/etcd/ class=md-nav__link> etcd </a> </li> <li class=md-nav__item> <a href=../../../roles/kv/zookeeper/ class=md-nav__link> zookeeper </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-7 type=checkbox id=nav-9-7> <label class=md-nav__link for=nav-9-7> 大数据 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=大数据 data-md-level=2> <label class=md-nav__title for=nav-9-7> <span class="md-nav__icon md-icon"></span> 大数据 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/bigdata/airflow/ class=md-nav__link> airflow </a> </li> <li class=md-nav__item> <a href=../../../roles/bigdata/cdh5-agent/ class=md-nav__link> cdh5-agent </a> </li> <li class=md-nav__item> <a href=../../../roles/bigdata/cdh5-pre/ class=md-nav__link> cdh5-pre </a> </li> <li class=md-nav__item> <a href=../../../roles/bigdata/cdh5-server/ class=md-nav__link> cdh5-server </a> </li> <li class=md-nav__item> <a href=../../../roles/bigdata/hadoop-standalone/ class=md-nav__link> hadoop-standalone </a> </li> <li class=md-nav__item> <a href=../../../roles/bigdata/superset/ class=md-nav__link> superset </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-8 type=checkbox id=nav-9-8> <label class=md-nav__link for=nav-9-8> 消息系统 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=消息系统 data-md-level=2> <label class=md-nav__title for=nav-9-8> <span class="md-nav__icon md-icon"></span> 消息系统 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/mq/kafka/ class=md-nav__link> kafka </a> </li> <li class=md-nav__item> <a href=../../../roles/mq/kafka-manager/ class=md-nav__link> kafka-manager </a> </li> <li class=md-nav__item> <a href=../../../roles/mq/rabbitmq/ class=md-nav__link> rabbitmq </a> </li> <li class=md-nav__item> <a href=../../../roles/mq/rocketmq/ class=md-nav__link> rocketmq </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-9 type=checkbox id=nav-9-9> <label class=md-nav__link for=nav-9-9> 持续集成/交付 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=持续集成/交付 data-md-level=2> <label class=md-nav__title for=nav-9-9> <span class="md-nav__icon md-icon"></span> 持续集成/交付 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/ci/deploy-image/ class=md-nav__link> deploy-image </a> </li> <li class=md-nav__item> <a href=../../../roles/ci/deploy-static/ class=md-nav__link> deploy-static </a> </li> <li class=md-nav__item> <a href=../../../roles/ci/deploy-supervisor/ class=md-nav__link> deploy-supervisor </a> </li> <li class=md-nav__item> <a href=../../../roles/ci/deploy-tomcat/ class=md-nav__link> deploy-tomcat </a> </li> <li class=md-nav__item> <a href=../../../roles/ci/jenkins/ class=md-nav__link> jenkins </a> </li> <li class=md-nav__item> <a href=../../../roles/ci/nexus/ class=md-nav__link> nexus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-10 type=checkbox id=nav-9-10> <label class=md-nav__link for=nav-9-10> 高可用 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=高可用 data-md-level=2> <label class=md-nav__title for=nav-9-10> <span class="md-nav__icon md-icon"></span> 高可用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/ha/keepalived/ class=md-nav__link> keepalived </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-11 type=checkbox id=nav-9-11> <label class=md-nav__link for=nav-9-11> 代理 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=代理 data-md-level=2> <label class=md-nav__title for=nav-9-11> <span class="md-nav__icon md-icon"></span> 代理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/proxy/haproxy/ class=md-nav__link> haproxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-12 type=checkbox id=nav-9-12> <label class=md-nav__link for=nav-9-12> 监控 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=监控 data-md-level=2> <label class=md-nav__title for=nav-9-12> <span class="md-nav__icon md-icon"></span> 监控 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/monitor/grafana/ class=md-nav__link> grafana </a> </li> <li class=md-nav__item> <a href=../../../roles/monitor/zabbix-agent/ class=md-nav__link> zabbix-agent </a> </li> <li class=md-nav__item> <a href=../../../roles/monitor/zabbix-server/ class=md-nav__link> zabbix-server </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-13 type=checkbox id=nav-9-13> <label class=md-nav__link for=nav-9-13> 日志分析 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=日志分析 data-md-level=2> <label class=md-nav__title for=nav-9-13> <span class="md-nav__icon md-icon"></span> 日志分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/log/elasticsearch/ class=md-nav__link> elasticsearch </a> </li> <li class=md-nav__item> <a href=../../../roles/log/filebeat/ class=md-nav__link> filebeat </a> </li> <li class=md-nav__item> <a href=../../../roles/log/grokdebug/ class=md-nav__link> grokdebug </a> </li> <li class=md-nav__item> <a href=../../../roles/log/kibana/ class=md-nav__link> kibana </a> </li> <li class=md-nav__item> <a href=../../../roles/log/logstash/ class=md-nav__link> logstash </a> </li> <li class=md-nav__item> <a href=../../../roles/log/heartbeat/ class=md-nav__link> heartbeat </a> </li> <li class=md-nav__item> <a href=../../../roles/log/metricbeat/ class=md-nav__link> metricbeat </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-14 type=checkbox id=nav-9-14> <label class=md-nav__link for=nav-9-14> 存储 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=存储 data-md-level=2> <label class=md-nav__title for=nav-9-14> <span class="md-nav__icon md-icon"></span> 存储 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/storage/gluster/ class=md-nav__link> gluster </a> </li> <li class=md-nav__item> <a href=../../../roles/storage/nfs/ class=md-nav__link> nfs </a> </li> <li class=md-nav__item> <a href=../../../roles/storage/samba/ class=md-nav__link> samba </a> </li> <li class=md-nav__item> <a href=../../../roles/storage/vsftpd/ class=md-nav__link> vsftpd </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-15 type=checkbox id=nav-9-15> <label class=md-nav__link for=nav-9-15> 容器 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=容器 data-md-level=2> <label class=md-nav__title for=nav-9-15> <span class="md-nav__icon md-icon"></span> 容器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/container/docker-compose/ class=md-nav__link> docker-compose </a> </li> <li class=md-nav__item> <a href=../../../roles/container/docker-swarm/ class=md-nav__link> docker-swarm </a> </li> <li class=md-nav__item> <a href=../../../roles/container/docker/ class=md-nav__link> docker </a> </li> <li class=md-nav__item> <a href=../../../roles/container/harbor/ class=md-nav__link> harbor </a> </li> <li class=md-nav__item> <a href=../../../roles/container/kubernetes-bin/ class=md-nav__link> kubernetes-bin </a> </li> <li class=md-nav__item> <a href=../../../roles/container/kubernetes/ class=md-nav__link> kubernetes </a> </li> <li class=md-nav__item> <a href=../../../roles/container/shipyard/ class=md-nav__link> shipyard </a> </li> <li class=md-nav__item> <a href=../../../roles/container/nomad/ class=md-nav__link> nomad </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-16 type=checkbox id=nav-9-16> <label class=md-nav__link for=nav-9-16> 数据同步 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=数据同步 data-md-level=2> <label class=md-nav__title for=nav-9-16> <span class="md-nav__icon md-icon"></span> 数据同步 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/sync/rsync/ class=md-nav__link> rsync </a> </li> <li class=md-nav__item> <a href=../../../roles/sync/sersync/ class=md-nav__link> sersync </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-17 type=checkbox id=nav-9-17> <label class=md-nav__link for=nav-9-17> 运维管理 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=运维管理 data-md-level=2> <label class=md-nav__title for=nav-9-17> <span class="md-nav__icon md-icon"></span> 运维管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/ops/os-check/ class=md-nav__link> os-check </a> </li> <li class=md-nav__item> <a href=../../../roles/ops/backup-file/ class=md-nav__link> backup-file </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-9-18 type=checkbox id=nav-9-18> <label class=md-nav__link for=nav-9-18> 其他 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=其他 data-md-level=2> <label class=md-nav__title for=nav-9-18> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roles/other/chrony/ class=md-nav__link> chrony </a> </li> <li class=md-nav__item> <a href=../../../roles/other/confd/ class=md-nav__link> confd </a> </li> <li class=md-nav__item> <a href=../../../roles/other/iptables/ class=md-nav__link> iptables </a> </li> <li class=md-nav__item> <a href=../../../roles/other/ntp/ class=md-nav__link> ntp </a> </li> <li class=md-nav__item> <a href=../../../roles/other/supervisor/ class=md-nav__link> supervisor </a> </li> <li class=md-nav__item> <a href=../../../roles/other/vault/ class=md-nav__link> vault </a> </li> <li class=md-nav__item> <a href=../../../roles/other/cfssl/ class=md-nav__link> cfssl </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 模块类型 </a> <nav class=md-nav aria-label=模块类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aaction-plugins class=md-nav__link> Aaction plugins </a> </li> <li class=md-nav__item> <a href=#new-style-modules class=md-nav__link> New-style modules </a> <nav class=md-nav aria-label="New-style modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=#powershell class=md-nav__link> PowerShell </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jsonargs-modules class=md-nav__link> JSONARGS modules </a> </li> <li class=md-nav__item> <a href=#non-native-want-json-modules class=md-nav__link> Non-native want JSON modules </a> </li> <li class=md-nav__item> <a href=#binary-modules class=md-nav__link> Binary modules </a> </li> <li class=md-nav__item> <a href=#old-style-modules class=md-nav__link> Old-style modules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 模块是如何执行的 </a> <nav class=md-nav aria-label=模块是如何执行的> <ul class=md-nav__list> <li class=md-nav__item> <a href=#executortask_executor class=md-nav__link> Executor/task_executor </a> </li> <li class=md-nav__item> <a href=#normal-action-plugin class=md-nav__link> normal action plugin </a> </li> <li class=md-nav__item> <a href=#executormodule_commonpy class=md-nav__link> Executor/module_common.py </a> </li> <li class=md-nav__item> <a href=#assembler-frameworks class=md-nav__link> Assembler frameworks </a> <nav class=md-nav aria-label="Assembler frameworks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-replacer-framework class=md-nav__link> Module Replacer framework </a> </li> <li class=md-nav__item> <a href=#ansiballz-framework class=md-nav__link> Ansiballz framework </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 参数传递 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 内部参数 </a> <nav class=md-nav aria-label=内部参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_ansible_no_log class=md-nav__link> _ansible_no_log </a> </li> <li class=md-nav__item> <a href=#_ansible_debug class=md-nav__link> _ansible_debug </a> </li> <li class=md-nav__item> <a href=#_ansible_diff class=md-nav__link> _ansible_diff </a> </li> <li class=md-nav__item> <a href=#_ansible_verbosity class=md-nav__link> _ansible_verbosity </a> </li> <li class=md-nav__item> <a href=#_ansible_selinux_special_fs class=md-nav__link> _ansible_selinux_special_fs </a> </li> <li class=md-nav__item> <a href=#_ansible_syslog_facility class=md-nav__link> _ansible_syslog_facility </a> </li> <li class=md-nav__item> <a href=#_ansible_version class=md-nav__link> _ansible_version </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 模块返回值和不安全字符串 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 特殊事项 </a> <nav class=md-nav aria-label=特殊事项> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pipelining class=md-nav__link> Pipelining </a> </li> <li class=md-nav__item> <a href=#stdin class=md-nav__link> 为什么在stdin传递参数? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ansiblemodule class=md-nav__link> AnsibleModule </a> <nav class=md-nav aria-label=AnsibleModule> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 参数 </a> <nav class=md-nav aria-label=参数> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type class=md-nav__link> type </a> </li> <li class=md-nav__item> <a href=#elements class=md-nav__link> elements </a> </li> <li class=md-nav__item> <a href=#default class=md-nav__link> default </a> </li> <li class=md-nav__item> <a href=#fallback class=md-nav__link> fallback </a> </li> <li class=md-nav__item> <a href=#choices class=md-nav__link> choices </a> </li> <li class=md-nav__item> <a href=#required class=md-nav__link> required </a> </li> <li class=md-nav__item> <a href=#no_log class=md-nav__link> no_log </a> </li> <li class=md-nav__item> <a href=#aliases class=md-nav__link> aliases </a> </li> <li class=md-nav__item> <a href=#options class=md-nav__link> options </a> </li> <li class=md-nav__item> <a href=#apply_defaults class=md-nav__link> apply_defaults </a> </li> <li class=md-nav__item> <a href=#removed_in_version class=md-nav__link> removed_in_version </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/leops-china/ansible-wiki/edit/master/docs/dev/modules/module-architecture.md title=编辑此页 class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=_1>模块架构<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <p>如果您正在使用Ansible Core代码、编写Ansible模块或开发动作插件，那么本次深入研究可帮助您了解Ansible程序流程是如何执行的。 如果您只是在剧本中使用Ansible模块，则可以跳过此部分。 </p> <h2 id=_2>模块类型<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>Ansible在其代码库中支持几种不同类型的模块。 其中一些是为了向后兼容，而其他一些则是为了实现灵活性。</p> <h3 id=aaction-plugins>Aaction plugins<a class=headerlink href=#aaction-plugins title="Permanent link">&para;</a></h3> <p>对于playbook来说，<strong>action</strong> 插件看起来是模块。大多数 <strong>action</strong> 插件的使用文档都位于同名的模块中。 一些 <strong>action</strong> 插件可以完成所有工作，而该模块仅提供文档。 一些 <strong>action</strong> 插件则和模块一起执行。 <code>normal</code> <strong>action ** 插件会执行没有特殊 **action</strong> 插件的模块。 <strong>action</strong> 插件始终在控制节点上执行。 </p> <p>有一些 <strong>action</strong> 插件在控制节点上就能完成所有的工作。例如：<code>debug</code> **action **插件(打印文本供用户查看)和<code>assert</code> **action **插件(测试剧本中的值是否满足某些条件)完全在控制节点上执行。</p> <p>大多数 <strong>action</strong> 插件会在控制节点上设置一些值，然后在受管节点上调用一个模块来对这些值进行处理。 例如：<code>template</code> **action **插件使用来自剧本中的变量，在控制节点上的临时目录中构建文件。 然后，它将临时文件传输到远程系统上的临时目录中。 之后，它将调用在远程系统上运行的<code>copy</code>模块，以将文件移至其最终位置，再去设置文件属性等信息。 </p> <p><strong>action</strong> 插件在<code>python2.7</code>的默认存储位置 <code>/usr/lib/python2.7/site-packages/ansible/plugins/**action**/</code></p> <h3 id=new-style-modules>New-style modules<a class=headerlink href=#new-style-modules title="Permanent link">&para;</a></h3> <p>Ansible附带的所有模块都属于此类别。 您可以使用 <strong>任何语言</strong> 编写模块，但所有官方模块（Ansible附带）均使用Python或<code>PowerShell</code>。</p> <p>新式模块以某种方式将模块的参数嵌入其中。老式的模块需要将参数文件复制到受管节点，这样效率较低，因为它需要两次连接而不是一次连接。</p> <h4 id=python>Python<a class=headerlink href=#python title="Permanent link">&para;</a></h4> <p>新式Python模块使用 <a href=https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#ansiballz>Ansiballz framework</a> 框架来构建模块。 这些模块使用来自<code>ansible.module_utils</code>的导入的模块代码，例如参数解析，将返回值格式化为<code>JSON</code>以及各种文件操作。 </p> <h4 id=powershell>PowerShell<a class=headerlink href=#powershell title="Permanent link">&para;</a></h4> <p>新式PowerShell模块使用 <a href=https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#module-replacer>Module Replacer framework</a> 框架构建模块。这些模块在被发送到受管节点之前，会获得一个嵌入其中的PowerShell代码文件。 </p> <h3 id=jsonargs-modules>JSONARGS modules<a class=headerlink href=#jsonargs-modules title="Permanent link">&para;</a></h3> <p>使用此模式写的模块一般都是脚本，其主体中包含字符串<code>&lt;&lt;INCLUDE_ANSIBLE_MODULE_JSON_ARGS&gt;&gt;</code>。 该字符串就是JSON格式的参数字符串。 如下所示：</p> <div class=highlight><pre><span></span><code><span class=n>json_arguments</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;&lt;&lt;INCLUDE_ANSIBLE_MODULE_JSON_ARGS&gt;&gt;&quot;&quot;&quot;</span>
</code></pre></div> <p>扩展写法</p> <div class=highlight><pre><span></span><code><span class=n>json_arguments</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;{&quot;param1&quot;: &quot;test&#39;s quotes&quot;, &quot;param2&quot;: &quot;</span><span class=se>\&quot;</span><span class=s2>To be or not to be</span><span class=se>\&quot;</span><span class=s2> - Hamlet&quot;}&quot;&quot;&quot;</span>
</code></pre></div> <p>这些模块通常使用JSON库解析<code>json_arguments</code>的内容，然后在整个代码中使用它们。</p> <h3 id=non-native-want-json-modules>Non-native want JSON modules<a class=headerlink href=#non-native-want-json-modules title="Permanent link">&para;</a></h3> <p>如果模块在任何位置都包含字符串<code>WANT_JSON</code>，则Ansible会将其视为非本地模块，该模块接受文件名作为其唯一的命令行参数。 该文件名用于包含JSON字符串（包含模块参数）的临时文件。 模块需要在退出之前打开文件，读取和解析参数，对数据进行操作，并将其返回数据作为JSON编码的字典打印到stdout。 </p> <p>一个ruby编写的模块</p> <div class=highlight><pre><span></span><code><span class=ch>#!/usr/bin/ruby</span>
<span class=c1># WANT_JSON</span>

<span class=nb>require</span> <span class=s1>&#39;rubygems&#39;</span>
<span class=nb>require</span> <span class=s1>&#39;json&#39;</span>

<span class=c1># this is a bare minimum example of a &#39;facts&#39; module that returns some variables into the ansible</span>
<span class=c1># namespace.  It may not be sufficiently idiomatic and doesn&#39;t do a lot of error checking. </span>

<span class=no>File</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=no>ARGV</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>)</span> <span class=k>do</span> <span class=o>|</span><span class=n>fh</span><span class=o>|</span>

   <span class=n>data</span> <span class=o>=</span> <span class=no>JSON</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>fh</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>

   <span class=k>begin</span>
      <span class=n>a</span> <span class=o>=</span> <span class=n>data</span><span class=o>[</span><span class=s1>&#39;a&#39;</span><span class=o>].</span><span class=n>to_i</span><span class=p>()</span> 
      <span class=n>b</span> <span class=o>=</span> <span class=n>data</span><span class=o>[</span><span class=s1>&#39;b&#39;</span><span class=o>].</span><span class=n>to_i</span><span class=p>()</span>
   <span class=k>rescue</span>
      <span class=c1># to raise an error, return failed=True and a msg string.</span>

      <span class=nb>print</span> <span class=no>JSON</span><span class=o>.</span><span class=n>dump</span><span class=p>({</span>
          <span class=s1>&#39;failed&#39;</span> <span class=o>=&gt;</span> <span class=kp>true</span><span class=p>,</span>
          <span class=s1>&#39;msg&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;failed to parse inputs x or y&#39;</span>
      <span class=p>})</span>

      <span class=c1># the error code here is not so important, the JSON is!</span>

      <span class=nb>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
   <span class=k>end</span>

   <span class=c1># we may also wish to return changed=True or changed=False</span>
   <span class=c1># if we were modifying system resources to support handlers and change tracking</span>
   <span class=c1># if the module decides to not run, it can also return skipped=True</span>

   <span class=n>result</span> <span class=o>=</span> <span class=p>{</span>
      <span class=s1>&#39;a&#39;</span>   <span class=o>=&gt;</span> <span class=n>a</span><span class=p>,</span>
      <span class=s1>&#39;b&#39;</span>   <span class=o>=&gt;</span> <span class=n>b</span><span class=p>,</span>
      <span class=s1>&#39;sum&#39;</span> <span class=o>=&gt;</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>,</span>
   <span class=p>}</span>

   <span class=nb>print</span> <span class=no>JSON</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>

<span class=k>end</span>
</code></pre></div> <p>playbook</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>hosts</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">example_servers</span>
  <span class=nt>gather_facts</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class=nt>tasks</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&#39;call</span><span class=nv> </span><span class=s>our</span><span class=nv> </span><span class=s>ruby</span><span class=nv> </span><span class=s>utility</span><span class=nv> </span><span class=s>module&#39;</span>
      <span class=nt>action</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">my_ruby_calculator a=7 b=100</span>
      <span class=nt>register</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">my_result</span>
    <span class="p p-Indicator">-</span> <span class=nt>action</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">debug var=my_result</span>
</code></pre></div> <p>实际上的执行</p> <div class=highlight><pre><span></span><code><span class=c1># cat /path/to/test.json</span>
<span class=o>{</span>
    <span class=s2>&quot;a&quot;</span> : <span class=m>2</span>,
    <span class=s2>&quot;b&quot;</span> : <span class=m>3</span>
<span class=o>}</span>

<span class=c1># ruby ./modules/my_calculator /path/to/test.json</span>
</code></pre></div> <h3 id=binary-modules>Binary modules<a class=headerlink href=#binary-modules title="Permanent link">&para;</a></h3> <p>从Ansible 2.2开始，模块也可以是二进制程序。 Ansible并不会处理不同系统的运行时依赖，因此它们自己处理二进制运行时的依赖项。 尽管有这些缺点，但如果这是访问某些资源的唯一方法，则可能必须针对特定的二进制库编译成自定义模块。 </p> <p>一个go语言的二进制模块 <a href=https://github.com/ansible/ansible/tree/devel/test/integration/targets/binary_modules/library/helloworld.go>helloworld.go</a></p> <h3 id=old-style-modules>Old-style modules<a class=headerlink href=#old-style-modules title="Permanent link">&para;</a></h3> <p>老式模块类似于<a href="#New-style modules">want JSON 模块</a>，只是它们参数是以<code>key=value</code>形式保存在文件中，而不是JSON。 如果模块中没有任何标记可以表明它是其他类型之一，则Ansible会确定该模块为老式模块。 </p> <p>一个bash脚本的例子</p> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/sh</span>

<span class=nv>args_file</span><span class=o>=</span><span class=nv>$1</span>

<span class=o>[</span> ! -f <span class=s2>&quot;</span><span class=nv>$args_file</span><span class=s2>&quot;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> -n <span class=s1>&#39;{&quot;failed&quot;: true, &quot;msg&quot;: &quot;missing required arguments: file&quot;}&#39;</span> <span class=o>&amp;&amp;</span> <span class=nb>exit</span> <span class=m>1</span>
<span class=nv>args_result</span><span class=o>=</span><span class=k>$(</span>cat <span class=nv>$args_file</span> <span class=p>|</span> gawk -F<span class=s1>&#39;file=&#39;</span> <span class=s1>&#39;{print $2}&#39;</span> <span class=p>|</span> gawk -F<span class=s1>&#39; &#39;</span> <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span>

<span class=o>[</span> ! -n <span class=s2>&quot;</span><span class=nv>$args_result</span><span class=s2>&quot;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> -n <span class=s2>&quot;{\&quot;failed\&quot;: true, \&quot;msg\&quot;: \&quot;file () is absent, cannot continue\&quot;, \&quot;file\&quot;: \&quot;</span><span class=nv>$args_result</span><span class=s2>\&quot;}&quot;</span> <span class=o>&amp;&amp;</span> <span class=nb>exit</span> <span class=m>1</span>

touch <span class=nv>$args_result</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> -n <span class=s2>&quot;{\&quot;changed\&quot;: true, \&quot;rc\&quot;: </span><span class=nv>$?</span><span class=s2>,\&quot;file\&quot;: \&quot;</span><span class=nv>$args_result</span><span class=s2>\&quot;}&quot;</span> <span class=o>||</span> <span class=nb>echo</span> -n <span class=s2>&quot;{\&quot;failed\&quot;: true, \&quot;rc\&quot;: </span><span class=nv>$?</span><span class=s2>, \&quot;file\&quot;: \&quot;</span><span class=nv>$args_result</span><span class=s2>\&quot;}&quot;</span>
<span class=nb>exit</span> <span class=nv>$?</span>
</code></pre></div> <p>参数的形式</p> <div class=highlight><pre><span></span><code><span class=c1># cat args</span>
<span class=nv>file</span><span class=o>=</span>/tmp/foo

<span class=c1># sh touch.sh args</span>
<span class=o>{</span><span class=s2>&quot;changed&quot;</span>: true, <span class=s2>&quot;rc&quot;</span>: <span class=m>0</span>,<span class=s2>&quot;file&quot;</span>: <span class=s2>&quot;/tmp/foo&quot;</span><span class=o>}</span>
</code></pre></div> <h2 id=_3>模块是如何执行的<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>当用户使用<code>ansible</code>或<code>ansible-playbook</code>时，他们指定要执行的任务。 任务通常是模块的名称以及要传递给模块的几个参数。 在远程计算机上执行之前，Ansible会获取这些值并以各种方式对其进行处理。</p> <h3 id=executortask_executor>Executor/task_executor<a class=headerlink href=#executortask_executor title="Permanent link">&para;</a></h3> <p><strong>TaskExecutor</strong> 接收从剧本（或在<code>/usr/bin/ansible</code>的情况下从命令行）解析的模块名称和参数。</p> <p>它使用名称来确定是在查看 <strong>模块</strong> 还是在查看 <strong>Action Plugin</strong>。 如果是模块，它将加载 <strong>"Normal Action Plugin"</strong>，并将名称，变量和有关任务的其他信息传递给该action插件以进行进一步处理。</p> <h3 id=normal-action-plugin><code>normal</code> action plugin<a class=headerlink href=#normal-action-plugin title="Permanent link">&para;</a></h3> <p><code>normal</code> action 插件将在远程主机上执行该模块。在远程主机主要内容就是执行模块。</p> <ul> <li>它为任务加载适当的 <strong>连接插件</strong>，然后根据需要传输或执行以创建与该主机的连接。</li> <li>它将Ansible的所有内部属性添加到模块的参数（例如，将no_log传递给模块的属性）。</li> <li>它可以与其他插件（connection, shell, become，其他action插件）一起使用，以在远程计算机上创建临时文件，然后进行清理。</li> <li>它将模块和模块参数推送到远程主机。</li> <li>它处理模块的所有特殊情况（例如，异步执行或Windows模块周围的复杂性，这些模块必须与Python模块具有相同的名称，以便可以从其他Action Plugins进行内部模块调用。 ）</li> </ul> <p>此功能大部分来自<code>BaseAction</code>类，该类位于<code>plugins/action/__ init__.py</code>中。 它使用<code>Connection</code>和<code>Shell</code>对象进行工作。</p> <blockquote> <p>当使用<code>async</code>参数运行任务时，Ansible将使用 <strong>async</strong> action插件而不是 <strong>normal</strong> action插件来调用它。 </p> </blockquote> <h3 id=executormodule_commonpy>Executor/module_common.py<a class=headerlink href=#executormodule_commonpy title="Permanent link">&para;</a></h3> <p><code>executor/module_common.py</code> 用于组装要发送到受管节点的模块。 首先读入模块内容，然后检查以确定其类型：</p> <ul> <li><a href=#PowerShell>PowerShell</a> 和 <a href="#JSONARGS modules">JSON-args</a> 模块通过模块替换器传递。</li> <li>新式Python模块由 Assembler frameworks 组装。</li> <li><a href=https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#flow-want-json-modules>Non-native-want-JSON</a>, <a href=https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#flow-binary-modules>Binary modules</a>, 和 <a href=https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#flow-old-style-modules>Old-Style modules</a> 不会被改变。</li> </ul> <p>组装步骤完成之后，对所有具有*shebang*的模块进行最后修改。 Ansible检查*shebang*行中的解释器是否具有通过<code>ansible_$X_interpreter</code>清单变量配置的特定路径。 如果有，Ansible会将该路径替换为模块中给定的解释器路径。 此后，Ansible将完整的模块数据和模块类型返回到 <strong>normal action</strong> ，该action将继续执行模块。</p> <h3 id=assembler-frameworks>Assembler frameworks<a class=headerlink href=#assembler-frameworks title="Permanent link">&para;</a></h3> <p>Ansible支持两个汇编程序框架：<strong>Ansiballz</strong> 和 <strong>Module Replacer</strong> (旧的)。</p> <h4 id=module-replacer-framework>Module Replacer framework<a class=headerlink href=#module-replacer-framework title="Permanent link">&para;</a></h4> <p>Module Replacer 框架是实现新型模块的原始框架，并且仍用于<code>PowerShell</code>模块。 它本质上是一个预处理器（就像熟悉该编程语言的C预处理器一样）。 它对模块文件中的特定子字符串模式进行直接替换。 有两种类型的替换：</p> <ul> <li>仅在模块文件中发生的替换。 这些是模块的公共替换字符串，可用于获取有用的样板或访问参数。</li> <li><code>from ansible.module_utils.MOD_LIB_NAME import *</code> 替换成 <code>ansible.module_utils.MOD_LIB_NAME</code> 。这些仅应与新型Python模块一起使用。</li> <li><code>#&lt;&lt;INCLUDE_ANSIBLE_MODULE_COMMON&gt;&gt;</code>等同于<code>ansible.module_utils.basic import *</code>，并且也仅适用于新型Python模块。</li> <li><code>#POWERSHELL_COMMON</code>替换<code>ansible/module_utils/powershell.ps1</code>的内容。 它只能与新型Powershell模块一起使用。</li> <li><code>ansible.module_utils</code>代码使用的替换。 这些是内部替换模式。 它们可以在上面的公共替换中内部使用，但不应直接由模块使用。</li> <li><code>&lt;&lt;ANSIBLE VERSION&gt;&gt;</code>被ANSIBLE VERSION替换。在Ansiballz框架框架下的新型Python模块中，正确的方法是实例化一个<code>AnsibleModul</code>e，然后从:attr:<code>AnsibleModule.ansible_version</code>访问这个版本。</li> <li><code>&lt;&lt;INCLUDE_ANSIBLE_MODULE_COMPLEX_ARGS&gt;&gt;</code>替换成一个字符串，该字符串是模块参数在Python中的JSON编码。 在JSON字符串上使用<code>repr</code>可以安全地嵌入到Python文件中。 在Ansiballz框架下的新型Python模块中，可以通过实例化<code>AnsibleModule</code>然后使用<code>AnsibleModule.params</code>来更好地进行访问。</li> <li><code>&lt;&lt;SELINUX_SPECIAL_FILESYSTEMS&gt;&gt;</code>替换成一个字符串，该字符串是以逗号分隔的文件系统列表，这些文件系统在SELinux中具有与文件系统相关的安全上下文。 在新型Python模块中，如果确实需要这样做，则应实例化<code>AnsibleModule</code>，然后使用<code>AnsibleModule._selinux_special_fs</code>。 该变量还从文件系统名称的逗号分隔字符串更改为文件系统名称的实际python列表。 </li> <li><code>&lt;&lt;INCLUDE ANSIBLE MODULE JSON ARGS&gt;&gt;</code>将MODULE参数替换为JSON字符串。必须注意正确引用字符串，因为JSON数据可能包含引号。这种模式在新型Python模块中没有被替代，因为它们可以通过另一种方式获得模块参数。 </li> <li>当字符串<code>syslog.LOG_USER</code>与syslog工具一起出现时，就会被替换， <code>syslog_facility</code> 是在ansible.cfg或任何适用于此主机的 <code>ansible_syslog_facility</code> 编目变量中命名的。在新型的Python模块中，这种情况略有改变。如果您确实需要访问它，您应该实例化一个<code>AnsibleModule</code>，然后使用<code>AnsibleModule._syslog_facility</code>访问它。它不再是实际的syslog工具，现在是syslog工具的名称。</li> </ul> <h4 id=ansiballz-framework>Ansiballz framework<a class=headerlink href=#ansiballz-framework title="Permanent link">&para;</a></h4> <p>Ansiballz框架在Ansible 2.1中采用，并用于所有新型Python模块。 与 <strong>Module Replacer</strong> 不同，Ansiballz在<code>ansible/module_utils</code>中使用真实的导入Python对象，而不仅仅是对模块进行预处理。 它通过构造一个zip文件来做到这一点-包括模块文件，模块导入的<code>ansible/module_utils</code>中的文件以及一些传递模块参数的样板文件。 然后，对zipfile进行Base64编码，然后将其包装在一个小的Python脚本中，该脚本会解码Base64编码，并将zipfile放入受管节点上的temp目录中。 然后，它仅从zip文件中提取Ansible模块脚本，并将其也放置在临时目录中。 然后，它将<code>PYTHONPATH</code>设置为在zip文件中查找Python模块，并将Ansible模块作为特殊名称<code>__main__</code>导入。 将其导入为<code>__main__</code>会使Python认为它正在执行脚本，而不是简单地导入模块。 这样，Ansible可以在远程计算机上的Python单个副本中运行包装过的脚本和模块代码。</p> <p>在Ansiballz中，从<code>ansible.module_utils</code>包中导入的任何Python模块都会触发将该Python文件包含到zipfile中。模块中<code>#&lt;&lt;INCLUDE_ANSIBLE_MODULE_COMMON&gt;&gt;</code>的实例由<code>ansible.module_utils.basic import *</code>转换而来。然后，<code>ansible/module-utils/basic.py</code>也包含在zipfile中。 自身将扫描<code>module_utils</code>中包含的文件，并从<code>module_utils</code>中导入其他Python模块，以便将其包含在zip文件中。 </p> <h2 id=_4>参数传递<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>两个框架通过不同的方式传递参数：</p> <ul> <li>在Module Replacer框架中，模块参数被转换成json化的字符串，并被替换到组合的模块文件中。</li> <li>在Ansiballz框架中，json化的字符串是zipfile的一部分。就在包装器脚本将Ansible模块作为主模块导入之前，它用变量值对私有的<code>_ANSIBLE_ARGS</code>变量<code>basic.py</code>进行了monkey-patch。当<code>ansible.module_utils.basic.AnsibleModule</code>实例化时 ， 它将解析此字符串并将args放入<code>AnsibleModule.params</code>中，模块的其他代码可以在其中访问它。 </li> </ul> <h2 id=_5>内部参数<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>除了用户在playbook中指定的参数外，Module Replacer框架和Ansiballz框架都向模块发送额外的参数。这些额外的参数是帮助实现全局Ansible特性的内部参数。模块通常不需要明确地知道这些，因为功能是在ansible实现的。模块跑龙套。基本的，但某些功能需要从模块的支持，所以了解他们也是有帮助开发的。</p> <p>此处列出的内部参数是全局的。 如果需要在自定义模块中添加本地内部参数，请为该特定模块创建一个action插件-有关示例，请参见copy action插件中的<code>_original_basename</code>。</p> <h3 id=_ansible_no_log>_ansible_no_log<a class=headerlink href=#_ansible_no_log title="Permanent link">&para;</a></h3> <p>布尔值。 每当task或paly中的参数指定no_log时，并将其设置为True。 任何调用<code>AnsibleModule.log()</code>的模块都会自动处理此问题。 如果模块实现自己的日志记录，则需要检查该值。 要访问模块，请实例化<code>AnsibleModule</code>，然后检查<code>AnsibleModule.no_log</code>的值。</p> <h3 id=_ansible_debug>_ansible_debug<a class=headerlink href=#_ansible_debug title="Permanent link">&para;</a></h3> <p>布尔值。 打开或关闭更详细的日志记录，并打开模块执行的外部命令的日志记录。 如果模块使用<code>AnsibleModule.debug()</code>而不是<code>AnsibleModule.log()</code>，则仅在<code>_ansible_debug</code>设置为True时才记录消息。 要进行设置，请在ansible.cfg中添加<code>debug: true</code>或设置环境变量ANSIBLE_DEBUG。 要访问模块，请实例化<code>AnsibleModule</code>并访问<code>AnsibleModule._debug</code>。</p> <h3 id=_ansible_diff>_ansible_diff<a class=headerlink href=#_ansible_diff title="Permanent link">&para;</a></h3> <p>布尔值。 如果模块支持，则告诉模块显示要对模板文件进行的更改的统一差异。 要进行设置，请传递<code>--diff</code>命令行选项。 要访问模块，请实例化<code>AnsibleModule</code>并访问<code>AnsibleModule._diff</code>。</p> <h3 id=_ansible_verbosity>_ansible_verbosity<a class=headerlink href=#_ansible_verbosity title="Permanent link">&para;</a></h3> <p>未使用的。此值可用于对日志进行更细粒度的控制。</p> <h3 id=_ansible_selinux_special_fs>_ansible_selinux_special_fs<a class=headerlink href=#_ansible_selinux_special_fs title="Permanent link">&para;</a></h3> <p>列表。 具有特殊SELinux上下文的文件系统的名称。 AnsibleModule方法使用它们，该方法对文件进行操作（更改属性，移动和复制）。 要进行设置，请在ansible.cfg中添加一个用逗号分隔的文件系统名称字符串：</p> <div class=highlight><pre><span></span><code><span class=c1># ansible.cfg</span>
<span class=k>[selinux]</span>
<span class=na>special_context_filesystems</span><span class=o>=</span><span class=s>nfs,vboxsf,fuse,ramfs,vfat</span>
</code></pre></div> <p>大多数模块可以使用内置的AnsibleModule方法来处理文件。 要访问需要了解这些特殊上下文文件系统的模块，请实例化<code>AnsibleModule</code>并检查<code>AnsibleModule._selinux_special_fs</code>中的列表。</p> <p>在 Module Replacer 框架中，将替换<code>ansible.module_utils.basic.SELINUX_SPECIAL_FS</code>, 在Module Replacer中，它是一个用逗号分隔的文件系统名称字符串。 在Ansiballz下是一个实际列表。</p> <h3 id=_ansible_syslog_facility>_ansible_syslog_facility<a class=headerlink href=#_ansible_syslog_facility title="Permanent link">&para;</a></h3> <p>此参数控制Ansible模块登录到哪个syslog工具。 要进行设置，请更改ansible.cfg中的<code>syslog_facility</code>值。 大多数模块应该只使用<code>AnsibleModule.log()</code>，然后再利用它。 如果模块必须自己使用它，则应实例化<code>AnsibleModule</code>，然后从<code>AnsibleModule._syslog_facility</code>检索syslog工具的名称。 Ansiballz代码比旧的Module Replacer框架代码更简洁：</p> <div class=highlight><pre><span></span><code><span class=c1># Old module_replacer way</span>
<span class=kn>import</span> <span class=nn>syslog</span>
<span class=n>syslog</span><span class=o>.</span><span class=n>openlog</span><span class=p>(</span><span class=n>NAME</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>syslog</span><span class=o>.</span><span class=n>LOG_USER</span><span class=p>)</span>

<span class=c1># New Ansiballz way</span>
<span class=kn>import</span> <span class=nn>syslog</span>
<span class=n>facility_name</span> <span class=o>=</span> <span class=n>module</span><span class=o>.</span><span class=n>_syslog_facility</span>
<span class=n>facility</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>syslog</span><span class=p>,</span> <span class=n>facility_name</span><span class=p>,</span> <span class=n>syslog</span><span class=o>.</span><span class=n>LOG_USER</span><span class=p>)</span>
<span class=n>syslog</span><span class=o>.</span><span class=n>openlog</span><span class=p>(</span><span class=n>NAME</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>facility</span><span class=p>)</span>
</code></pre></div> <h3 id=_ansible_version>_ansible_version<a class=headerlink href=#_ansible_version title="Permanent link">&para;</a></h3> <p>此参数传递运行该模块的Ansible版本。 要访问它，模块应实例化<code>AnsibleModule</code>，然后从<code>AnsibleModule.ansible_version</code>检索它。 这将替换Module Replacer 框架中的<code>ansible.module_utils.basic.ANSIBLE_VERSION</code>。</p> <h2 id=_6>模块返回值和不安全字符串<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <p>在模块执行结束时，它将要返回的数据格式化为JSON字符串，并将该字符串打印到其标准输出。<code>normal</code> action插件接收JSON字符串，将其解析为Python字典，然后将其返回给执行程序。</p> <p>如果Ansible模板化每个字符串返回值，则很容易受到有权访问受管节点的用户的攻击。 如果不道德的用户将恶意代码伪装成Ansible返回值字符串，然后在控制器上将这些字符串模板化，则Ansible可以执行任意代码。 为了防止出现这种情况，Ansible将返回数据中的所有字符串标记为“Unsafe”，逐字发射字符串中的任何Jinja2模板，而不是Jinja2对其进行扩展。</p> <p>通过<code>ActionPlugin._execute_module()</code>调用模块返回的字符串将由<code>normal</code> action插件自动标记为“Unsafe”。 如果另一个action插件通过其他方式从模块检索信息，则它必须自己将其返回数据标记为“Unsafe”。</p> <p>如果action插件未能将其结果标记为“不Unsafe”，则Ansible在将结果返回给执行程序时会再次审核结果，将所有字符串标记为“Unsafe”。 <code>normal</code> action插件以结果数据作为参数来保护自己和它调用的任何其他代码。 执行程序中的检查可保护所有其他action插件的输出，从而确保由Ansible运行的后续任务也不会从这些结果中获取任何模板。</p> <h2 id=_7>特殊事项<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <h3 id=pipelining>Pipelining<a class=headerlink href=#pipelining title="Permanent link">&para;</a></h3> <p>Ansible可以通过以下两种方式之一将模块传输到远程计算机：</p> <ul> <li>它可以将模块写到远程主机上的临时文件中，然后使用与远程主机的第二个连接来使用模块所需的解释器执行它</li> <li>或者，它也可以使用Pipelining来执行模块，将模块导入远程解释器的stdin中。</li> </ul> <p>目前，Pipelining仅适用于用Python编写的模块，因为Ansible只知道Python支持这种操作模式。 支持Pipelining意味着，模块有效载荷通过有线发送之前采用的任何格式，都必须由Python通过stdin执行。</p> <h3 id=stdin>为什么在stdin传递参数?<a class=headerlink href=#stdin title="Permanent link">&para;</a></h3> <p>选择通过stdin传递参数的原因如下：</p> <ul> <li>与<code>ANSIBLE_PIPELINING</code>结合使用时，可以防止模块的参数临时保存到远程计算机的磁盘上。 这使得远程计算机上的恶意用户更难（但并非不可能）窃取自变量中可能存在的任何敏感信息。</li> <li>命令行参数是不安全的，因为大多数系统允许非特权用户读取进程的完整命令行。</li> <li>环境变量通常比命令行更安全，但是一些系统限制环境的总体大小。如果达到这个限制，可能会导致参数截断。</li> </ul> <h2 id=ansiblemodule>AnsibleModule<a class=headerlink href=#ansiblemodule title="Permanent link">&para;</a></h2> <h3 id=_8>参数<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <p>提供给<code>AnsibleModule</code>的<code>arguments_spec</code>定义了模块支持的参数，以及它们的类型，默认值和更多内容。</p> <div class=highlight><pre><span></span><code><span class=n>module</span> <span class=o>=</span> <span class=n>AnsibleModule</span><span class=p>(</span><span class=n>argument_spec</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
    <span class=n>top_level</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
        <span class=nb>type</span><span class=o>=</span><span class=s1>&#39;dict&#39;</span><span class=p>,</span>
        <span class=n>options</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
            <span class=n>second_level</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
                <span class=n>default</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
                <span class=nb>type</span><span class=o>=</span><span class=s1>&#39;bool&#39;</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=p>)</span>
    <span class=p>)</span>
<span class=p>))</span>
</code></pre></div> <p>参数的选项</p> <h4 id=type>type<a class=headerlink href=#type title="Permanent link">&para;</a></h4> <p>type允许您定义为参数接受的值的类型。类型的默认值是str。可能的值是</p> <ul> <li>str</li> <li>list</li> <li>dict</li> <li>bool</li> <li>int</li> <li>float</li> <li>path</li> <li>raw</li> <li>jsonarg</li> <li>json</li> <li>bytes</li> <li>bits</li> </ul> <p><code>raw</code>类型，不执行任何类型验证或类型大小写，并维护传递值的类型。</p> <h4 id=elements>elements<a class=headerlink href=#elements title="Permanent link">&para;</a></h4> <p>当<code>type ='list'</code>时，elements与type结合使用。 然后可以将elements定义为<code>elements ='int'</code>或任何其他类型，指示指定列表中的每个元素都应该属于该类型。</p> <h4 id=default>default<a class=headerlink href=#default title="Permanent link">&para;</a></h4> <p><code>default</code>选项允许在不向模块提供参数的情况下为场景的参数设置默认值。未指定时，默认值为None。</p> <h4 id=fallback>fallback<a class=headerlink href=#fallback title="Permanent link">&para;</a></h4> <p><code>fallback</code>接受一个元组，其中第一个参数是一个可调用的（函数），将用于基于第二个参数执行查找。 第二个参数是可调用对象接受的值的列表。</p> <p>最常用的可调用方法是<code>env_fallback</code>，当不提供参数时，它将允许参数有选择地使用环境变量。</p> <div class=highlight><pre><span></span><code><span class=n>username</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>fallback</span><span class=o>=</span><span class=p>(</span><span class=n>env_fallback</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;ANSIBLE_NET_USERNAME&#39;</span><span class=p>]))</span>
</code></pre></div> <h4 id=choices>choices<a class=headerlink href=#choices title="Permanent link">&para;</a></h4> <p>options接受参数将接受的choices列表。选择的类型应该与类型匹配。</p> <h4 id=required>required<a class=headerlink href=#required title="Permanent link">&para;</a></h4> <p>required接受一个布尔值，True或False表示该参数是必需的。 这不应与默认值结合使用。</p> <h4 id=no_log>no_log<a class=headerlink href=#no_log title="Permanent link">&para;</a></h4> <p>no_log接受布尔值（True或False），该布尔值明确指示参数值是否应在日志和输出中屏蔽。</p> <h4 id=aliases>aliases<a class=headerlink href=#aliases title="Permanent link">&para;</a></h4> <p>aliases接受参数的替代参数名称的列表，例如参数为<code>name</code>但模块接受<code>aliases=['pkg']</code>的情况，以允许pkg与<code>name</code>互换</p> <h4 id=options>options<a class=headerlink href=#options title="Permanent link">&para;</a></h4> <p>options实现了创建子选项的功能， 本节的示例演示了选项的使用。 在这种情况下，类型或元素应该是dict。</p> <h4 id=apply_defaults>apply_defaults<a class=headerlink href=#apply_defaults title="Permanent link">&para;</a></h4> <p>apply defaults与options一起工作，并允许应用子选项的默认值，即使在没有提供顶级参数的情况下也是如此。</p> <h4 id=removed_in_version>removed_in_version<a class=headerlink href=#removed_in_version title="Permanent link">&para;</a></h4> <p><code>remove_in_version</code>指明将在哪个Ansible版本中删除不推荐使用的参数。</p> <hr> <div class=md-source-date> <small> 最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2020-12-03 08:40:01</span> </small> </div> <h2 id=__comments>评论</h2> <div id=utteranc-comment></div> <script src=https://utteranc.es/client.js label=utteranc-comment repo=leops-china/ansible-wiki issue-term=pathname theme=github-light crossorigin=anonymous async>
	</script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../module-doc/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> 上一页 </span> module 的帮助文档 </div> </div> </a> <a href=../module-utilities/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> 下一页 </span> module 工具类 </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - 2020 leops </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/leops-china/ansible-wiki target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.7e0ee788.min.js></script> <script src=../../../assets/javascripts/bundle.b3a72adc.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>